<!DOCTYPE html>

<html>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style type="text/css">

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    overflow: hidden;
    font-family: "PT Sans", sans-serif;
  }

  #plotDiv {
    width: 100vw;
    height: 100vh;
  }

</style>

<body>

  <div id="plotDiv"></div>

  <script>

    /* Global variables */

    var xValues = []
    var yValues = []
    var xStep = 1
    var numPoints = 100

    /* Plot configuration */

    // Define initial values
    setXValues(numPoints)
    setYValues()

    // Define dataset
    var data = [{
      x: xValues,
      y: yValues,
      mode: 'lines',
      //line: {simplify: false},
      //type: 'scattergl',
    }]

    // Define layout
    var layout = {
      autosize: true,
      xaxis: {
        title: '2Î¸ (deg)',
        automargin: true,
        autorange: true,
        showgrid: true,
        zeroline: false,
        showline: true,
        mirror: 'ticks',
      },
      yaxis: {
        title: 'Icalc',
        automargin: true,
        showgrid: true,
        zeroline: false,
        showline: true,
        mirror: 'ticks',
      },
      margin: {
          l: 43,
          r: 3,
          b: 50,
          t: 40,
          pad: 0
        }
    }

    // Define config
    var config = {
      displayModeBar: true,
      displaylogo: false,
    }

    /* Display plot */

    Plotly.newPlot('plotDiv', data, layout, config)

    /* FUNCTIONS */

    // Set data x values
    function setXValues(numPoints) {
      xValues.length = 0
      for (i = 0; i < numPoints; i++) {
        xValues[i] = i * xStep
      }
    }

    // Set data y values
    function setYValues() {
      yValues.length = 0
      for (i = 0; i < xValues.length; i++) {
        yValues[i] = Math.random()
      }
    }

    // Redraw
    function redraw() {
      plotDiv.data[0]['y'] = [15, 13, 17, 10]
      Plotly.redraw(plotDiv)
    }

    function changeArraySizes(newNumPoints) {
      setXValues(newNumPoints)
      setYValues()
      Plotly.redraw('plotDiv')
    }

    // Redraw with animation
    function redrawWithAnimation() {
      setYValues()
      Plotly.animate('plotDiv', {
        data: [{ y: yValues }],
        traces: [0]
      }, {
        transition: {
          duration: 500,
          easing: 'cubic-in-out'
        },
        frame: {
          duration: 500
        }
      })
    }

  </script>

</body>

</html>
